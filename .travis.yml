language: python

python:
  - "2.7"

install:
  # Some unittests were not passing without this encoding setting
  - export PYTHONIOENCODING=UTF8

  # Install w3af dependencies
  - pip install -q --use-mirrors --upgrade PyGithub GitPython pybloomfiltermmap esmre pysqlite nltk chardet pdfminer futures pyOpenSSL lxml scapy-real guess-language cluster msgpack-python python-ntlm

  # Install test dependencies
  - pip install -q --use-mirrors --upgrade pylint nose-exclude psutil SOAPpy
  - pip install -q --use-mirrors --upgrade -e git+git://github.com/andresriancho/nose-timer.git#egg=nose-timer

script:
  - nosetests -v -s --with-doctest --doctest-tests --with-timer -A "not moth and not internet" core/data/
  - nosetests -v -s --with-doctest --doctest-tests --with-timer -A "not moth and not internet" core/controllers/
  - nosetests -v -s --with-doctest --doctest-tests --with-timer -A "not moth and not internet" plugins/

branches:
  only:
    - master
    - develop
    - /^release.*$/
    - /^hotfix.*$/

notifications:
  irc:
    channels: "irc.freenode.org#w3af"
    on_success: change
    on_failure: change
  email: true
